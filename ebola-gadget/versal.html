<!DOCTYPE html>
<html>
<head>
<title>Empty gadget</title>
<script src="bower_components/versal-component-runtime/dist/runtime.min.js"></script>

<script src="picoModal-2.0.1.min.js"></script>

<link rel="import" href="bower_components/versal-gadget-api/versal-gadget-api.html">
 <link rel="stylesheet" href="versal.css">
</head>

<body>
<script>
var player = new VersalPlayerAPI();

player.on('attributesChanged', function(data){

});

player.on('learnerStateChanged', function(data){

});

player.on('editableChanged', function(editable){

});

player.setHeight(2500);
player.startListening();
  

var score=0;
var score2=0;
var scorewrong=0;
var count=0;
var count2=0;

function allowDrop(ev) {
    ev.preventDefault();
}

function drag(ev) {
    ev.dataTransfer.setData("text/html", ev.target.id);
}

function rePositionModal(ev) {
	window.aprox_scroll_y = ev.pageY - ev.screenY;
	popup_top = (screen.height / 2) + window.aprox_scroll_y;
	if (popup_top < 251) {
		popup_top = 251;
	} 
	// Have some minimum value
	var modals = document.querySelectorAll(".pico-content");
	[].forEach.call(modals, function(modal){
		modal.style.top = popup_top + 'px';
	});
}

function drop(ev, element) {
	count++;
    ev.preventDefault();
    var data = ev.dataTransfer.getData("text/html");
    ev.target.appendChild(document.getElementById(data));
    element.querySelector('img').draggable=false;
    element.querySelector('img').width="150";
    element.querySelector('img').height="150";
    //console.log('case', element.id.substring(3, 4));
    //console.log('case', element.querySelector('img').id);
    if(element.querySelector('img').id == element.id.substring(3, 4)){
    	score++;
    }
	document.getElementById("score").innerHTML = "Matchs: "+score;
    if(count > 1){
    	if(score == 0){
    		picoModal("You should study more...").show();
    	}

    	if(score > 0 && score < 4){
    		picoModal("Yeah, you are good but not enough. You should keep studying.").show();
    	}

    	if(score >= 4 && score <= 7){
    		picoModal("Yeah, you did very well but you can learn a little more.").show();
    	}

    	if(score > 7){
    		picoModal("Congratulations, you are expert in the Ebola's life-cycle.").show();
    	}

    	rePositionModal(ev);
    }
}



function changeImage(element) {
		count2++;
        if (element.id=="buttons1") 
        {
            document.getElementById(element.id).innerHTML = "<img src='corret.png' width='90' height='90'>";
            score2++;
        }

        if (element.id=="buttons2") 
        {
            document.getElementById(element.id).innerHTML = "<img src='wrong.png' width='90' height='90'>";
			scorewrong++;
        }

        if (element.id=="buttons3") 
        {
            document.getElementById(element.id).innerHTML = "<img src='corret.png' width='90' height='90'>";
            score2++;
        }

        if (element.id=="buttons4") 
        {
            document.getElementById(element.id).innerHTML = "<img src='corret.png' width='90' height='90'>";
            score2++;
        }

        if (element.id=="buttons5") 
        {
            document.getElementById(element.id).innerHTML = "<img src='wrong.png' width='90' height='90'>";
			scorewrong++;
        }

        if (element.id=="buttons6") 
        {
            document.getElementById(element.id).innerHTML = "<img src='corret.png' width='90' height='90'>";
            score2++;
        }
        if(count2 ==4){
        	score2 = score2 - scorewrong;

    		picoModal("Your score is: "+score2).show();	
    		rePositionModal(event);
        }
}



</script>

<h1>Ebola Virus Quiz Gadget</h1>
<br>
<strong>Causes severe disease in humans in the form of a violent and viral hemorrhagic fever.</strong>
<br><br>

<strong>1</strong> - Ebolavirus attaches to receptors of the host cell using a glycoprotein called a peplomer.
A peplomer is a glycoprotein spike on the viral envelope that will only bind to specific receptors on a host cell. The virus is then engulfed by endocytosis.<br>
<br>
<strong>2</strong>  - Ebola virion envelope and cellular membrane of host fuses together and the virus nucleocapsid is released.<br>
<br>
<strong>3</strong>  - Virus uncoats and the nucleocapsid is transcribed onto positive stranded mRNA which are translated into viral proteins.<br>
<br>
<strong>4</strong>  - Glycosylation occurs in which viral proteins attach to glycans and the glycoprotein precursors are cleaved into grlycoprotein 1 and 2.<br>
<br>
<strong>5</strong>  - Glycoproteins 1 and 2 assemble to form heterodimers. in the meantime, a negative stranded RNA strand is synthesized to be used as a template to create positive single stranded RNA.<br>
<br>
<strong>6</strong>  - Heterodimers multiply to form trimers that will form the surface peplomers of the emerging Ebola cells.<br>
<br>
<strong>7</strong>  - New viral RNA copies are made from the negative stranded RNA strand and the trimers make their way to the cell membrane.<br>
<br>
<strong>8</strong> - Formation of nucleocapsids and viral envelope occur when the trimers (viral proteins) and new genomes gather around the edges of the host cell in preparation for b udding.<br>
<br>
<strong>9</strong>  - Newly formed Ebola viruses bud from the host cell, gaining the cell's membrane. Mature progeny are free to infect other cells.<br><br><br><br>

  
<p align="center"><strong>Try to figure out how is the life-cycle of the Ebola virus.</strong></p>
<div id="imgs">
	<div id="imgs1">
		<div id="div1" ondrop="drop(event)"  ondragover="allowDrop(event)" >
		  	<img src="11.png" draggable="true" ondragstart="drag(event)" id="1" width="90" height="90">
		</div>
		<div id="div2" ondrop="drop(event)"  ondragover="allowDrop(event)">
	  		<img src="12.png" draggable="true" ondragstart="drag(event)" id="2" width="90" height="90">
		</div>
		<div id="div3" ondrop="drop(event)"  ondragover="allowDrop(event)">
		  	<img src="13.png" draggable="true" ondragstart="drag(event)" id="3" width="90" height="90">
		</div>
		<div id="div4" ondrop="drop(event)"  ondragover="allowDrop(event)">
		  	<img src="14.png" draggable="true" ondragstart="drag(event)" id="4" width="90" height="90">
		</div>
		<div id="div5" ondrop="drop(event)"  ondragover="allowDrop(event)">
		  	<img src="15.png" draggable="true" ondragstart="drag(event)" id="5" width="90" height="90">
		</div>
	</div>
	<div id="imgs2">
		<div id="div6" ondrop="drop(event)"  ondragover="allowDrop(event)">
		  	<img src="16.png" draggable="true" ondragstart="drag(event)" id="6" width="90" height="90">
		</div>
		<div id="div7" ondrop="drop(event)"  ondragover="allowDrop(event)">
		  	<img src="17.png" draggable="true" ondragstart="drag(event)" id="7" width="90" height="90">
		</div>
		<div id="div8" ondrop="drop(event)"  ondragover="allowDrop(event)">
		  	<img src="18.png" draggable="true" ondragstart="drag(event)" id="8" width="90" height="90">
		</div>
		<div id="div9" ondrop="drop(event)" ondragover="allowDrop(event)">
		  	<img src="19.png" draggable="true" ondragstart="drag(event)" id="9" width="90" height="90">
		</div>
	</div>
</div>



<div id="ans">
	<div id="score">
		Matchs: 0
	</div>
	<div id="ans6" ondrop="drop(event, ans6)" ondragover="allowDrop(event)"></div>
	<div id="ans5" ondrop="drop(event, ans5)" ondragover="allowDrop(event)"></div>
	</br>
	<div id="ans7" ondrop="drop(event, ans7)" ondragover="allowDrop(event)"></div>
	<div id="ans4" ondrop="drop(event, ans4)" ondragover="allowDrop(event)"></div>
	</br>
	<div id="ans3" ondrop="drop(event, ans3)" ondragover="allowDrop(event)"></div>
	<div id="ans8" ondrop="drop(event, ans8)" ondragover="allowDrop(event)"></div>
	</br>
	<div id="ans9" ondrop="drop(event, ans9)" ondragover="allowDrop(event)"></div>
	<div id="ans2" ondrop="drop(event, ans2)" ondragover="allowDrop(event)"></div>
	</br>
	<div id="ans1" ondrop="drop(event, ans1)" ondragover="allowDrop(event)"></div>
</div>


<div id="quiz">
	<p align="center"><strong>Try to figure out what are the symptoms of the Ebola virus.</strong></p>
	<div id="quiz_div">
		<div id="buttons1" onclick="changeImage(buttons1)">
		</div>
		<div id="buttons2" onclick="changeImage(buttons2)">
		</div>
		<div id="buttons3" onclick="changeImage(buttons3)">
		</div>
		<div id="buttons4" onclick="changeImage(buttons4)">
		</div>
		<div id="buttons5" onclick="changeImage(buttons5)">
		</div>
		<div id="buttons6" onclick="changeImage(buttons6)">
		</div>
	</div>
</div>

</body>
</html>
